2025-07-17 07:57:07.762 | INFO     | se_letters.utils.json_output_manager:_init_directories:99 - âœ… Directory structure initialized: data/output/json_outputs
2025-07-17 07:57:07.762 | INFO     | se_letters.utils.json_output_manager:__init__:88 - ğŸ“ JSON Output Manager initialized: data/output/json_outputs
2025-07-17 07:57:07.770 | INFO     | se_letters.services.intelligent_product_matching_service:__init__:42 - ğŸ§  Intelligent Product Matching Service initialized (Production Mode)
2025-07-17 07:57:07.770 | INFO     | se_letters.services.sota_product_database_service:__init__:45 - ğŸ“Š SOTA Product Database Service initialized (PostgreSQL)
2025-07-17 07:57:07.770 | INFO     | se_letters.services.sota_product_database_service:__init__:46 - ğŸ—„ï¸ Database: postgresql://alexandre@localhost:5432/se_letters_dev
2025-07-17 07:57:07.873 | INFO     | se_letters.services.production_pipeline_service:_init_database:265 - ğŸ—„ï¸ Production database initialized successfully
2025-07-17 07:57:07.902 | INFO     | __main__:__init__:40 | ğŸš€ Production Pipeline Runner initialized
2025-07-17 07:57:07.902 | INFO     | __main__:__init__:41 | ğŸ“Š Database: data/letters.duckdb
2025-07-17 07:57:07.902 | INFO     | __main__:main:373 | ğŸ“„ Processing single file: data/test/documents/PIX2B_Phase_out_Letter.pdf
2025-07-17 07:57:07.902 | INFO     | __main__:process_single_document:78 | ğŸ“„ Processing document: data/test/documents/PIX2B_Phase_out_Letter.pdf
2025-07-17 07:57:07.902 | INFO     | __main__:process_single_document:79 | ğŸ”„ Force reprocess: True
2025-07-17 07:57:07.902 | INFO     | se_letters.services.production_pipeline_service:process_document:280 | ğŸš€ Starting production pipeline for: data/test/documents/PIX2B_Phase_out_Letter.pdf
2025-07-17 07:57:07.902 | INFO     | se_letters.services.production_pipeline_service:process_document:281 | ğŸ“ File size: 170524 bytes
2025-07-17 07:57:07.902 | INFO     | se_letters.services.production_pipeline_service:process_document:282 | ğŸ”„ Force reprocess: True
2025-07-17 07:57:07.902 | INFO     | se_letters.services.production_pipeline_service:process_document:286 | ğŸ” Step 1: Checking document existence
2025-07-17 07:57:07.921 | INFO     | se_letters.services.production_pipeline_service:_check_document_exists:428 | ğŸ“‹ Document found in database: ID=33
2025-07-17 07:57:07.921 | INFO     | se_letters.services.production_pipeline_service:_check_document_exists:429 | ğŸ“… Previous processing: 2025-07-15 14:48:43.698000
2025-07-17 07:57:07.921 | INFO     | se_letters.services.production_pipeline_service:_check_document_exists:430 | ğŸ“Š Status: processed
2025-07-17 07:57:07.921 | INFO     | se_letters.services.production_pipeline_service:_check_document_exists:431 | ğŸ“‚ Existing path: /Users/alexandre/workshop/devApp/SE_letters/data/test/documents/PIX2B_Phase_out_Letter.pdf
2025-07-17 07:57:07.923 | INFO     | se_letters.services.production_pipeline_service:process_document:298 | ğŸ”„ Force reprocessing existing document: data/test/documents/PIX2B_Phase_out_Letter.pdf
2025-07-17 07:57:07.936 | INFO     | se_letters.services.production_pipeline_service:_delete_existing_document:474 | ğŸ—‘ï¸ Deleted child records for document: ID=33
2025-07-17 07:57:07.942 | INFO     | se_letters.services.production_pipeline_service:process_document:305 | âœ… Step 2: Validating content compliance
2025-07-17 07:57:07.942 | INFO     | se_letters.services.production_pipeline_service:_validate_content_compliance:499 | ğŸ” Extracting document content for validation
2025-07-17 07:57:07.954 | INFO     | se_letters.services.production_pipeline_service:_validate_content_compliance:507 | ğŸ“„ Document content extracted: 3567 characters
2025-07-17 07:57:08.260 | WARNING  | se_letters.services.production_pipeline_service:_check_network_connectivity:609 | âš ï¸ Network connectivity check failed: HTTP Error 421: Misdirected Request
2025-07-17 07:57:08.261 | WARNING  | se_letters.services.production_pipeline_service:_validate_content_compliance:511 | âš ï¸ Network connectivity issues detected - skipping XAI validation
2025-07-17 07:57:08.261 | INFO     | se_letters.services.production_pipeline_service:process_document:319 | ğŸ¤– Step 3: Processing with Grok (no fallback)
2025-07-17 07:57:08.261 | INFO     | se_letters.services.production_pipeline_service:_process_with_grok:689 | ğŸ¤– Processing document with Grok (no fallback)
2025-07-17 07:57:08.280 | INFO     | se_letters.services.production_pipeline_service:_process_with_grok:697 | ğŸ”„ Requesting comprehensive extraction from Grok
2025-07-17 07:57:17.068 | INFO     | se_letters.services.production_pipeline_service:_process_with_grok:712 | âœ… Grok processing completed successfully
2025-07-17 07:57:17.068 | INFO     | se_letters.services.production_pipeline_service:_process_with_grok:713 | ğŸ“Š Extracted 2 products
2025-07-17 07:57:17.068 | INFO     | se_letters.services.production_pipeline_service:process_document:332 | âœ… Grok extraction completed successfully
2025-07-17 07:57:17.069 | INFO     | se_letters.services.production_pipeline_service:process_document:333 | ğŸ“Š Extracted 2 products
2025-07-17 07:57:17.069 | INFO     | se_letters.services.production_pipeline_service:process_document:336 | ğŸ” Step 4: Intelligent Product Matching
2025-07-17 07:57:17.069 | INFO     | se_letters.services.production_pipeline_service:_process_product_matching:761 | ğŸ” Processing product matching
2025-07-17 07:57:17.069 | INFO     | se_letters.services.intelligent_product_matching_service:create_letter_product_info_from_grok_metadata:355 | ğŸ“‹ Created 2 LetterProductInfo objects from Grok metadata
2025-07-17 07:57:17.069 | INFO     | se_letters.services.sota_product_database_service:discover_product_candidates:57 | ğŸ” Discovering product candidates for: PROD_1
2025-07-17 07:57:17.119 | ERROR    | se_letters.services.sota_product_database_service:_execute_discovery_query:361 | âŒ Database query failed: list index out of range
2025-07-17 07:57:17.119 | INFO     | se_letters.services.sota_product_database_service:discover_product_candidates:80 | âœ… Product discovery completed in 49.86ms
2025-07-17 07:57:17.119 | INFO     | se_letters.services.sota_product_database_service:discover_product_candidates:83 | ğŸ“Š Found 0 product candidates
2025-07-17 07:57:17.119 | INFO     | se_letters.services.intelligent_product_matching_service:match_products:129 | ğŸ” Starting intelligent product matching for: PROD_1
2025-07-17 07:57:17.119 | INFO     | se_letters.services.intelligent_product_matching_service:match_products:131 | ğŸ“Š Processing 0 product candidates
2025-07-17 07:57:17.119 | INFO     | se_letters.services.intelligent_product_matching_service:match_products:139 | ğŸ¤– Calling Grok API for intelligent matching
2025-07-17 07:57:18.026 | INFO     | se_letters.services.intelligent_product_matching_service:match_products:164 | âœ… Product matching completed in 906.59ms
2025-07-17 07:57:18.026 | INFO     | se_letters.services.intelligent_product_matching_service:match_products:166 | ğŸ“Š Found 0 matching products
2025-07-17 07:57:18.026 | INFO     | se_letters.services.intelligent_product_matching_service:match_products:167 | ğŸ¯ Range-based matching: True
2025-07-17 07:57:18.026 | INFO     | se_letters.services.sota_product_database_service:discover_product_candidates:57 | ğŸ” Discovering product candidates for: PROD_2
2025-07-17 07:57:18.032 | ERROR    | se_letters.services.sota_product_database_service:_execute_discovery_query:361 | âŒ Database query failed: list index out of range
2025-07-17 07:57:18.032 | INFO     | se_letters.services.sota_product_database_service:discover_product_candidates:80 | âœ… Product discovery completed in 6.40ms
2025-07-17 07:57:18.033 | INFO     | se_letters.services.sota_product_database_service:discover_product_candidates:83 | ğŸ“Š Found 0 product candidates
2025-07-17 07:57:18.033 | INFO     | se_letters.services.intelligent_product_matching_service:match_products:129 | ğŸ” Starting intelligent product matching for: PROD_2
2025-07-17 07:57:18.033 | INFO     | se_letters.services.intelligent_product_matching_service:match_products:131 | ğŸ“Š Processing 0 product candidates
2025-07-17 07:57:18.033 | INFO     | se_letters.services.intelligent_product_matching_service:match_products:139 | ğŸ¤– Calling Grok API for intelligent matching
2025-07-17 07:57:18.913 | INFO     | se_letters.services.intelligent_product_matching_service:match_products:164 | âœ… Product matching completed in 880.12ms
2025-07-17 07:57:18.913 | INFO     | se_letters.services.intelligent_product_matching_service:match_products:166 | ğŸ“Š Found 0 matching products
2025-07-17 07:57:18.914 | INFO     | se_letters.services.intelligent_product_matching_service:match_products:167 | ğŸ¯ Range-based matching: True
2025-07-17 07:57:18.914 | INFO     | se_letters.services.production_pipeline_service:_process_product_matching:782 | âœ… Product matching completed: 0 matches
2025-07-17 07:57:18.914 | INFO     | se_letters.services.production_pipeline_service:process_document:340 | ğŸ’¾ Step 5: Ingesting into database
2025-07-17 07:57:18.914 | INFO     | se_letters.services.production_pipeline_service:_ingest_into_database:803 | ğŸ’¾ Ingesting results into database
2025-07-17 07:57:18.943 | INFO     | se_letters.services.production_pipeline_service:_ingest_into_database:876 | âœ… Database ingestion completed: Document ID 33
2025-07-17 07:57:18.966 | INFO     | se_letters.services.production_pipeline_service:process_document:360 | ğŸ’¾ Step 6: Saving JSON outputs
2025-07-17 07:57:18.966 | WARNING  | se_letters.services.production_pipeline_service:process_document:372 | âš ï¸ Failed to save JSON outputs: 'ProductionPipelineService' object has no attribute '_save_json_outputs'
2025-07-17 07:57:18.966 | INFO     | se_letters.services.production_pipeline_service:process_document:374 | âœ… Production pipeline completed successfully in 11063.95ms
2025-07-17 07:57:18.966 | INFO     | se_letters.services.production_pipeline_service:process_document:375 | ğŸ“Š Document ID: 33
2025-07-17 07:57:18.966 | INFO     | se_letters.services.production_pipeline_service:process_document:376 | ğŸ¯ Confidence: 0.80
2025-07-17 07:57:18.966 | INFO     | se_letters.services.production_pipeline_service:process_document:377 | ğŸ“¦ Products found: 0
2025-07-17 07:57:18.966 | SUCCESS  | __main__:_log_processing_result:194 | âœ… Successfully processed: PIX2B_Phase_out_Letter.pdf
2025-07-17 07:57:18.966 | INFO     | __main__:_log_processing_result:195 | ğŸ“Š Document ID: 33
2025-07-17 07:57:18.966 | INFO     | __main__:_log_processing_result:196 | ğŸ¯ Confidence: 0.80
2025-07-17 07:57:18.966 | INFO     | __main__:_log_processing_result:197 | â±ï¸ Processing time: 11063.95ms
2025-07-17 07:57:18.966 | INFO     | __main__:_log_processing_result:200 | ğŸ“¦ Product ranges: []
{"success": true, "error": null, "file_name": "PIX2B_Phase_out_Letter.pdf", "file_path": "data/test/documents/PIX2B_Phase_out_Letter.pdf", "processing_time_ms": 11063.951015472412, "extracted_ranges": [], "valid_ranges": [], "invalid_ranges": [], "obsolete_products": [], "replacement_products": [], "obsolete_count": 0, "replacement_count": 0, "extraction_method": "production_pipeline", "extraction_confidence": 0.8, "search_strategy": "xai_grok_processing", "search_space_reduction": 0, "json_outputs_saved": true, "json_outputs_location": "data/output/json_outputs/PIX2B_Phase_out_Letter_33/latest/", "grok_metadata": {"products": [{"product_identifier": "PROD_1", "range_label": "PIX 2B", "product_description": "PIX 2B offer, launched in 2014", "confidence_score": 0.8666666666666667}, {"product_identifier": "PROD_2", "range_label": "PIX Double Bus Bar", "product_description": "PIX Double Bus Bar", "confidence_score": 0.8666666666666667}], "extraction_metadata": {"confidence": 0.8666666666666667, "analysis_quality": "high", "text_length": 3567, "extraction_method": "xai_grok3_enhanced", "limitations": ["Limited to explicitly stated information, no inference made for missing data"], "processing_time": 8.787903070449829, "api_model": "grok-3-latest", "document_name": "PIX2B_Phase_out_Letter.pdf", "schema_version": "v2.0"}, "processing_timestamp": 8.787903070449829, "confidence_score": 0.8666666666666667}}
